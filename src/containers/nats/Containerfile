FROM debian:latest

# Install dependencies
RUN apt-get update && apt-get install -y bash curl unzip 

# Install NATS server
RUN curl -L https://github.com/nats-io/nats-server/releases/latest/download/nats-server-$(uname -s)-$(uname -m).zip -o /tmp/nats-server.zip \
    && unzip /tmp/nats-server.zip -d /usr/local/bin/ \
    && rm /tmp/nats-server.zip

# Install NATS CLI
RUN curl -L https://github.com/nats-io/natscli/releases/latest/download/nats-$(uname -s)-$(uname -m).zip -o /tmp/natscli.zip \
    && unzip /tmp/natscli.zip -d /usr/local/bin/ \
    && rm /tmp/natscli.zip

# Set working directory
WORKDIR /var/lib/nats

# Expose necessary ports
EXPOSE 4222 6222 8222

# Set bash as default shell
CMD ["/bin/bash"]
